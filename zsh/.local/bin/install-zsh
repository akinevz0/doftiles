#!/bin/sh

# Define installation directories
ZSH_INSTALL_DIR=~/.config/oh-my-zsh
ZSH_CUSTOM=$ZSH_INSTALL_DIR/custom
ZSH_PLUGINS_DIR=$ZSH_CUSTOM/plugins

# Function to handle errors
handle_error() {
    echo "Error: $1" >&2
    exit 1
}

# Install Oh My Zsh
echo "Installing Oh My Zsh..."
git clone https://github.com/ohmyzsh/ohmyzsh.git "$ZSH_INSTALL_DIR" || handle_error "Failed to clone Oh My Zsh repository"

# Install custom plugins
plugins=(
    "zsh-completions"
    "zsh-autosuggestions"
    "zsh-syntax-highlighting"
)

for plugin in "${plugins[@]}"; do
    echo "Installing $plugin..."
    git clone "https://github.com/zsh-users/$plugin" "$ZSH_PLUGINS_DIR/$plugin" || handle_error "Failed to clone $plugin repository"
done

# Run Oh My Zsh install script
echo "Running Oh My Zsh install script..."
"$ZSH_INSTALL_DIR/tools/install.sh" || handle_error "Oh My Zsh installation script failed"

echo "Zsh installation completed successfully!"
